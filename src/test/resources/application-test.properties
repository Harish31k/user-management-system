# ============================================================
# TEST profile — used by all integration tests
# ============================================================

# DATASOURCE (Testcontainers JDBC URL auto-starts MySQL container)
spring.datasource.url=jdbc:tc:mysql:8.0:///testdb?TC_REUSABLE=true
spring.datasource.username=test
spring.datasource.password=test
spring.datasource.driver-class-name=org.testcontainers.jdbc.ContainerDatabaseDriver

# JPA
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect

# FLYWAY
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=false
spring.flyway.locations=classpath:db/migration

# CACHE
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=500,expireAfterWrite=10m

# KAFKA — use embedded Kafka provided by @EmbeddedKafka or mock the service
spring.kafka.bootstrap-servers=${spring.embedded.kafka.brokers:localhost:9092}
spring.kafka.producer.properties.spring.json.add.type.headers=false
spring.kafka.consumer.group-id=test-group
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.properties.spring.json.trusted.packages=*
spring.kafka.consumer.properties.spring.json.value.default.type=com.management.dto.event.UserEvent

# JWT
jwt.secret=test-secret-key-must-be-at-least-32-chars-long!!
jwt.expiration=3600000

# LOGGING
logging.level.org.springframework.security=WARN
logging.level.com.management=DEBUG
